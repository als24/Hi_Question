(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-rank-index"],{"16a9":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"rank-wrap"},[a("navbar",{attrs:{fixed:!0,transparent:"show",backgroundColor:[224,229,236]}},[a("v-uni-view",{staticClass:"text-xl text-bold"},[t._v("排行榜")])],1),a("v-uni-view",{staticClass:"margin-lr"},[a("v-uni-view",{staticClass:"top-rank"},t._l(t.topRankList,(function(e,n){return a("v-uni-view",{key:n,staticClass:"topitem"},[a("v-uni-view",{staticClass:"avatar"},[a("v-uni-image",{attrs:{src:e.userinfo.avatar,mode:"widthFix"}})],1),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",[a("v-uni-text",{staticClass:"correct"},[t._v(t._s(e.ratio)+"%")]),a("v-uni-text")],1),a("v-uni-view",{staticClass:"ratio"},[t._v("答题数:"+t._s(e.totalNum))]),a("v-uni-view",{staticClass:"nickname"},[t._v(t._s(e.userinfo.nickname))])],1)],1)})),1),a("v-uni-view",{staticClass:"flex justify-end text-gray margin-top-sm?"},[a("v-uni-view",[t._v("数据更新时间:\n        "+t._s(t._f("parseTime")(t.updateTime,"{y}-{m}-{d} {h}:{i}")))])],1),a("v-uni-view",{staticClass:"bottom-rank"},t._l(t.subRankList,(function(e,n){return a("v-uni-view",{key:n,staticClass:"rank-item"},[a("v-uni-view",[a("v-uni-text",{staticClass:"ranking"},[t._v(t._s(n+4))]),a("v-uni-text",{staticClass:"name"},[t._v(t._s(e.userinfo.nickname))])],1),a("v-uni-view",[a("v-uni-text",{staticClass:"correct"},[t._v(t._s(e.correct))]),a("v-uni-text",{staticClass:"ratio"},[t._v("("+t._s(e.ratio)+"%)")])],1)],1)})),1)],1)],1)},r=[]},"1cb4":function(t,e,a){"use strict";var n=a("f0c4"),i=a.n(n);i.a},4797:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("55dd"),a("c5f6"),a("456d");var i=n(a("768b"));a("7514"),a("96cf");var r=n(a("3b8d"));a("ac6a");var o=n(a("6171")),s=function(t){var e={},a=0;return t.forEach((function(t){var n=t.userinfo,i=t.rightQuestionsNum,r=t.wrongQuestions;a+=i+r.length,o.default.isEmpty(e[n.userId])?e[n.userId]={totalNum:i+r.length,rightNum:i,userinfo:n}:e[n.userId]=Object.assign(e[n.userId],{totalNum:e[n.userId]["totalNum"]+i+r.length,rightNum:e[n.userId]["rightNum"]+i})})),[e,a]},c={data:function(){return{topRankList:[],subRankList:[]}},computed:{updateTime:function(){return new Date((new Date).toLocaleDateString()).getTime()-60}},mounted:function(){this.getQuestionResults()},methods:{getQuestionResults:function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(){var e,a,n,r,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"加载中..."}),e=new wx.BaaS.TableObject("paper_result"),a=new wx.BaaS.Query,a.compare("inRank","=",!0),t.next=6,e.setQuery(a).limit(1e3).find();case 6:if(n=t.sent,r=s(n.data.objects),c=(0,i.default)(r,2),u=c[0],d=c[1],!o.default.isEmpty(n)){t.next=11;break}return uni.hideLoading(),t.abrupt("return");case 11:u=Object.keys(u).map((function(t){return Object.assign(u[t],{radioNum:u[t]["rightNum"]/u[t]["totalNum"],ratio:Number(u[t]["rightNum"]/u[t]["totalNum"]*100).toFixed(2)})})),u=u.sort((function(t,e){var a=t.totalNum/d*20+80*t.radioNum,n=e.totalNum/d*20+80*e.radioNum;return n-a})),this.topRankList=u.splice(0,3),this.subRankList=u.splice(0,7),uni.hideLoading();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}};e.default=c},"5b45":function(t,e,a){"use strict";a.r(e);var n=a("4797"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},7225:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"[data-v-51196615]:export{blue:#4a6df3;gray:#aaa;green:#30b08f;light-blue:#4674e5;panGreen:#30b08f;pink:#e96169;red:#c03639;text-df:%?28?%;text-lg:%?32?%;text-sl:%?80?%;text-sm:%?24?%;text-xl:%?36?%;text-xs:%?20?%;text-xsl:%?120?%;text-xxl:%?44?%;tiffany:#56ccf2;yellow:#f2cf63}.rank-wrap .top-rank[data-v-51196615]{display:grid;margin-top:%?40?%;-webkit-align-content:end;align-content:end;grid-template-columns:1fr 1fr 1fr}.rank-wrap .top-rank .avatar[data-v-51196615]{text-align:center}.rank-wrap .top-rank .avatar uni-image[data-v-51196615]{margin:0 auto;margin-bottom:%?30?%;border-radius:50%;width:%?100?%;height:%?100?%;background:-webkit-linear-gradient(225deg,#f0f5fd,#caced4);background:linear-gradient(225deg,#f0f5fd,#caced4);box-shadow:-5px 5px 10px #bec3c9,5px -5px 10px #fff}.rank-wrap .top-rank .topitem[data-v-51196615]{border-radius:%?30?% %?30?% 0 0;background:#e0e5ec;-webkit-align-self:end;align-self:end}.rank-wrap .top-rank .topitem .content[data-v-51196615]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.rank-wrap .top-rank .topitem .content .correct[data-v-51196615]{margin-right:%?4?%;margin-bottom:%?4?%;font-size:%?44?%;font-weight:800}.rank-wrap .top-rank .topitem .content .ratio[data-v-51196615]{font-size:%?24?%;color:#aaa}.rank-wrap .top-rank .topitem[data-v-51196615]:nth-child(1){-webkit-align-self:end;align-self:end;-webkit-box-ordinal-group:3;-webkit-order:2;order:2}.rank-wrap .top-rank .topitem:nth-child(1) .content[data-v-51196615]{height:%?340?%;box-shadow:5px 5px 10px #bec3c9,-5px -5px 10px #fff}.rank-wrap .top-rank .topitem[data-v-51196615]:nth-child(2){-webkit-align-self:end;align-self:end;-webkit-box-ordinal-group:2;-webkit-order:1;order:1}.rank-wrap .top-rank .topitem:nth-child(2) .content[data-v-51196615]{height:%?260?%;box-shadow:5px 5px 10px #bec3c9,-5px -5px 10px #fff}.rank-wrap .top-rank .topitem[data-v-51196615]:nth-child(3){-webkit-align-self:end;align-self:end;-webkit-box-ordinal-group:4;-webkit-order:3;order:3}.rank-wrap .top-rank .topitem:nth-child(3) .content[data-v-51196615]{height:%?220?%;box-shadow:5px 5px 10px #bec3c9,-5px -5px 10px #fff}.rank-wrap .bottom-rank .rank-item[data-v-51196615]{display:-webkit-box;display:-webkit-flex;display:flex;margin-top:%?20?%;border-radius:%?20?%;padding:%?20?%;height:90%;background:#e0e5ec;box-shadow:10px 10px 20px #bec3c9,-10px -10px 20px #fff;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.rank-wrap .bottom-rank .rank-item .ranking[data-v-51196615]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;margin:%?10?% %?20?% %?10?% 0;border-radius:50%;width:%?50?%;height:%?50?%;font-weight:600;background:-webkit-linear-gradient(305deg,#caced4,#f0f5fd);background:linear-gradient(145deg,#caced4,#f0f5fd);box-shadow:2px 2px 5px #bec3c9,-2px -2px 5px #fff;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.rank-wrap .bottom-rank .rank-item .name[data-v-51196615]{font-size:%?32?%}.rank-wrap .bottom-rank .rank-item .correct[data-v-51196615]{margin-right:%?4?%;font-size:%?36?%}.rank-wrap .bottom-rank .rank-item .ratio[data-v-51196615]{font-size:%?24?%;color:#aaa}",""]),t.exports=e},"7acc":function(t,e,a){"use strict";a.r(e);var n=a("16a9"),i=a("5b45");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("1cb4");var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"51196615",null,!1,n["a"],o);e["default"]=c.exports},f0c4:function(t,e,a){var n=a("7225");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("40ea93a3",n,!0,{sourceMap:!1,shadowMode:!1})}}]);